!function(e){"use strict";function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e){return function(n){return Object.prototype.toString.call(n)==="[object "+e+"]"}}function t(e,n){for(var r=0,t=e.length;r<t&&!1!==n.call(e,e[r],r);r++);}function i(e,n,r){var t=v(n)?n.call(null,r):n;if(!t)return null;var i={name:e,version:f,codename:""};if(!0===t)return i;if(l(t)){if(-1!==r.indexOf(t))return i}else{if(w(t))return t.hasOwnProperty("version")&&(i.version=t.version),i;if(h(t)){var o=t.exec(r);if(o)return o.length>=2&&o[1]?i.version=o[1].replace(/_/g,"."):i.version=f,i}}}function o(e,n,r,o){var a=m;t(n,function(n){var r=i(n[0],n[1],e);if(r)return a=r,!1}),r.call(o,a.name,a.version)}function a(e){if(O)try{var n=O.twGetRunPath.toLowerCase(),r=O.twGetSecurityID(k),t=O.twGetVersion(r);if(n&&-1===n.indexOf(e))return!1;if(t)return{version:t}}catch(e){}}function s(e){if(!B.re_msie.test(e))return null;var n=void 0,r=void 0,t=void 0,i=void 0,o=void 0;if(-1!==e.indexOf("trident/")&&(n=/\btrident\/([0-9.]+)/.exec(e))&&n.length>=2){t=n[1];var a=n[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}n=B.re_msie.exec(e),i=n[1];var s=n[1].split(".");return void 0===o&&(o=i),s[0]=parseInt(s[0],10)-4,r=s.join("."),void 0===t&&(t=r),{browserVersion:o,browserMode:i,engineVersion:t,engineMode:r,compatible:t!==r}}function u(e){var n=P.parse(e),r=s(e);if(r){var t=n.engine.name,i=r.engineVersion||r.engineMode,o=parseFloat(i),a=r.engineMode;n.engine={name:t,version:o,fullVersion:i,mode:parseFloat(a),fullMode:a,compatible:!!r&&r.compatible},n.engine[n.engine.name]=o;var u=n.browser.name,c=n.browser.fullVersion;"ie"===u&&(c=r.browserVersion);var p=r.browserMode,d=parseFloat(c);n.browser={name:u,version:d,fullVersion:c,mode:parseFloat(p),fullMode:p,compatible:!!r&&r.compatible},n.browser[u]=d}return n}function c(e,n){function r(){this.constructor=e}for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function p(){switch(ce.browser.type){case e.BrowserType.Chrome:ae=new K;break;case e.BrowserType.Firefox:ae=new H;break;case e.BrowserType.Opera:ae=new Y;break;case e.BrowserType.Safari:ae=new J;break;case e.BrowserType.MS_Edge:ae=new X;break;case e.BrowserType.MSIE:ae=new Z;break;default:ae=new Q}var n=ae.computeTotalLoadingTime();if(ae.measure(),n<=0)return void p();new ne(ue,ce).report(ae).catch(function(){})}function d(){var e=new ie(ue,ce);new re(e).install()}var b=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),f="-1",m={name:"na",version:f},l=r("String"),h=r("RegExp"),w=r("Object"),v=r("Function"),g=function(){function e(r){n(this,e),this._rules=r}return b(e,[{key:"parse",value:function(e){e=(e||"").toLowerCase();var n={};o(e,this._rules.device,function(e,r){var t=parseFloat(r);n.device={name:e,version:t,fullVersion:r},n.device[e]=t},n),o(e,this._rules.os,function(e,r){var t=parseFloat(r);n.os={name:e,version:t,fullVersion:r},n.os[e]=t},n);var r=this.IEMode(e);return o(e,this._rules.engine,function(e,t){var i=t;r&&(t=r.engineVersion||r.engineMode,i=r.engineMode);var o=parseFloat(t);n.engine={name:e,version:o,fullVersion:t,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},n.engine[e]=o},n),o(e,this._rules.browser,function(e,t){var i=t;r&&("ie"===e&&(t=r.browserVersion),i=r.browserMode);var o=parseFloat(t);n.browser={name:e,version:o,fullVersion:t,mode:parseFloat(i),fullMode:i,compatible:!!r&&r.compatible},n.browser[e]=o},n),n}},{key:"IEMode",value:function(e){if(!this._rules.re_msie.test(e))return null;var n=void 0,r=void 0,t=void 0,i=void 0,o=void 0;if(-1!==e.indexOf("trident/")&&(n=/\btrident\/([0-9.]+)/.exec(e))&&n.length>=2){t=n[1];var a=n[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}n=this._rules.re_msie.exec(e),i=n[1];var s=n[1].split(".");return void 0===o&&(o=i),s[0]=parseInt(s[0],10)-4,r=s.join("."),void 0===t&&(t=r),{browserVersion:o,browserMode:i,engineVersion:t,engineMode:r,compatible:t!==r}}}]),e}(),y=g,T="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},k="undefined"==typeof window?T:window,O=k.external,x=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,S=[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var n=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:n.test(e)?n:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],E=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var n=e.match(/\bbb10\b.+?\bversion\/([\d.]+)/)||e.match(/\bblackberry\b.+\bversion\/([\d.]+)/)||e.match(/\bblackberry\d+\/([\d.]+)/);return n?{version:n[1]}:"blackberry"}]],M=[["edgehtml",/edge\/([0-9.]+)/],["trident",x],["blink",function(){return"chrome"in k&&"CSS"in k&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var n=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/);if(n)return{version:n[1]+"."+n[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],_=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=a("theworld");return void 0!==e?e:/theworld(?: ([\d.])+)?/}],["360",function(e){var n=a("360se");return void 0!==n?n:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(O&&(O.mxVersion||O.max_version))return{version:O.mxVersion||O.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var n=void 0;try{O&&O.LiebaoGetVersion&&(n=O.LiebaoGetVersion())}catch(e){}return{version:n||"-1"}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",x],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var n=/\bopera.+version\/([0-9.ab]+)/;return n.test(e)?n:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var n=e.match(/\bbb10\b.+?\bversion\/([\d.]+)/)||e.match(/\bblackberry\b.+\bversion\/([\d.]+)/)||e.match(/\bblackberry\d+\/([\d.]+)/);return n?{version:n[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]],B={device:S,os:E,browser:_,engine:M,re_msie:x},L=navigator.userAgent||"",z=navigator.appVersion||"",I=navigator.vendor||"",R=L+" "+z+" "+I,P=new y(B),C=u(R);C.parse=u;var F=C,V=function(){function e(e,n,r,t){this.device=e,this.os=n,this.engine=r,this.browser=t}return e}(),W=new V(F.device,F.os,F.engine,F.browser);!function(e){e[e.MSIE=0]="MSIE",e[e.MS_Edge=1]="MS_Edge",e[e.Chrome=2]="Chrome",e[e.Safari=3]="Safari",e[e.Firefox=4]="Firefox",e[e.Opera=5]="Opera"}(e.BrowserType||(e.BrowserType={})),function(e){e[e.Windows=0]="Windows",e[e.MacOS=1]="MacOS",e[e.IOS=2]="IOS",e[e.Android=3]="Android",e[e.ChromeOS=4]="ChromeOS",e[e.Linux=5]="Linux",e[e.WindowsPhone=6]="WindowsPhone",e[e.YunOS=7]="YunOS"}(e.OSType||(e.OSType={})),function(e){e[e.EdgeHTML=0]="EdgeHTML",e[e.Trident=1]="Trident",e[e.Blink=2]="Blink",e[e.Webkit=3]="Webkit",e[e.Gecko=4]="Gecko",e[e.Presto=5]="Presto",e[e.AndroidWebkit=6]="AndroidWebkit",e[e.UC=7]="UC"}(e.EngineType||(e.EngineType={}));var A=function(){function n(n,r){this.type=n,this.version=r,this._type=e.BrowserType[n]}return n}(),D=function(){function n(n,r){this.type=n,this.version=r,this._type=e.EngineType[n]}return n}(),j=function(){function n(n,r){this.type=n,this.version=r,this._type=e.OSType[n]}return n}(),q=function(){function e(e,n){this.type=e,this.version=n}return e}(),G=function(){function n(){}return n.prototype.detect=function(){return this.detectBrowser(),this.detectEngine(),this.detectOperatingSystem(),this.detectDevice(),this},n.prototype.detectBrowser=function(){var n=e.BrowserType.Chrome,r=W.browser.fullVersion;switch(W.browser.name){case"chrome":n=e.BrowserType.Chrome;break;case"firefox":n=e.BrowserType.Firefox;break;case"safari":n=e.BrowserType.Safari;break;case"opera":n=e.BrowserType.Opera;break;case"ie":n=e.BrowserType.MSIE;break;case"edge":n=e.BrowserType.MS_Edge}this.browser=new A(n,r)},n.prototype.detectEngine=function(){var n=e.EngineType.Webkit,r=W.engine.fullVersion;switch(W.engine.name){case"edgehtml":n=e.EngineType.EdgeHTML;break;case"trident":n=e.EngineType.Trident;break;case"blink":n=e.EngineType.Blink;break;case"webkit":n=e.EngineType.Webkit;break;case"gecko":n=e.EngineType.Gecko;break;case"presto":n=e.EngineType.Presto;break;case"androidwebkit":n=e.EngineType.AndroidWebkit;break;case"u2":case"u3":n=e.EngineType.UC}this.engine=new D(n,r)},n.prototype.detectOperatingSystem=function(){var n=e.OSType.MacOS,r=W.browser.fullVersion;switch(W.os.name){case"window":n=e.OSType.Windows;break;case"macosx":n=e.OSType.MacOS;break;case"ios":n=e.OSType.IOS;break;case"android":n=e.OSType.Android;break;case"chromeos":n=e.OSType.ChromeOS;break;case"linux":n=e.OSType.Linux;break;case"wp":n=e.OSType.WindowsPhone;break;case"yunos":n=e.OSType.YunOS}this.operatingSystem=new j(n,r)},n.prototype.detectDevice=function(){this.device=new q(W.device.name,W.device.fullVersion)},n}(),N=function(){function e(){}return e}(),U=function(){function e(){}return e}(),Q=function(e){function n(){var n=e.call(this)||this;return n.performanceAPI=window.performance,n.performanceAPI&&(n.timing=n.performanceAPI.timing),n}return c(n,e),n.prototype.measure=function(){var e=this.computeResourceTime();return this.imagesTime=e.img,this.stylesTime=e.link,this.scriptsTime=e.script,this.DNSLookupTime=this.computeDNSLookupTime(),this.DOMParsingTime=this.computeDOMParsingTime(),this.firstByteTime=this.computeFirstByteTime(),this.firstInteractionTime=this.computeFirstInteractionTime(),this.firstMeaningfulTime=this.computeFirstMeaningfulTime(),this.firstPaintTime=this.computeFirstPaintTime(),this.downloadingTime=this.computeTotalDownloadingTime(),this.totalLoadingTime=this.computeTotalLoadingTime(),this},n.prototype.computeFirstPaintTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.domLoading-this.timing.navigationStart);return e<=0?-1:e},n.prototype.computeFirstMeaningfulTime=function(){return-1},n.prototype.computeFirstInteractionTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.domInteractive-this.timing.navigationStart);return e<=0?-1:e},n.prototype.computeTotalLoadingTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.loadEventEnd-this.timing.navigationStart);return e<=0?-1:e},n.prototype.computeTotalDownloadingTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.responseEnd-this.timing.requestStart);return e<=0?-1:e},n.prototype.computeResourceTime=function(){var e=new N;if(!this.performanceAPI||!this.performanceAPI.getEntriesByType)return e;var n=this.performanceAPI.getEntriesByType("resource");if(!(n&&n instanceof Array))return e;var r={img:{duration:0,count:0},script:{duration:0,count:0},link:{duration:0,count:0}},t=n.reduce(function(e,n){var r=e[n.initiatorType];return r&&(r.count+=1,r.duration+=n.duration),e},r);return e.img=Math.round(t.img.duration/t.img.count),e.script=Math.round(t.script.duration/t.script.count),e.link=Math.round(t.link.duration/t.link.count),e},n.prototype.computeDOMParsingTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.domComplete-this.timing.responseEnd);return e<=0?-1:e},n.prototype.computeDNSLookupTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.domainLookupEnd-this.timing.domainLookupStart);return e<=0?-1:e},n.prototype.computeFirstByteTime=function(){if(!this.timing)return-1;var e=Math.round(this.timing.responseStart-this.timing.navigationStart);return e<=0?-1:e},n}(U),K=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.loadTimes=window.chrome.loadTimes(),n}return c(n,e),n.prototype.computeFirstPaintTime=function(){var n=this.loadTimes.firstPaintTime,r=this.loadTimes.startLoadTime;return n<=0?e.prototype.computeFirstByteTime.call(this):Math.round(1e3*(n-r))},n}(Q),H=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return c(n,e),n}(Q),Y=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return c(n,e),n}(Q),J=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return c(n,e),n.prototype.computeResourceTime=function(){try{return e.prototype.computeResourceTime.call(this)}catch(e){}return new N},n}(Q),X=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return c(n,e),n}(Q),Z=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return c(n,e),n}(Q),$=function(){function e(){this.imageReporter=new Image}return e.prototype.sendRequest=function(e){var n=this;return this.imageReporter.src=e,new Promise(function(e,r){var t=function(){e(),o()},i=function(){r(),o()};n.imageReporter.addEventListener("load",t,!1),n.imageReporter.addEventListener("error",i,!1);var o=function(){n.imageReporter.removeEventListener("load",t,!1),n.imageReporter.removeEventListener("error",i,!1)}})},e.prototype.URLBuilder=function(e,n){if(!n)throw new Error("Parameters can not be empty");for(var r=+new Date,t=[],i=0,o=Object.keys(n);i<o.length;i++){var a=o[i],s=n[a];(s>0||"-1"!==s)&&t.push(a+"="+n[a])}var u=t.join("&"),c="?"+r+"&"+u;return encodeURI(e+c)},e}(),ee={firstPaintTime:"fp",firstByteTime:"fb",firstMeaningfulTime:"fm",firstInteractionTime:"fi",totalLoadingTime:"tl",downloadingTime:"dl",DOMParsingTime:"dp",DNSLookupTime:"du",imagesTime:"im",stylesTime:"ss",scriptsTime:"sc"},ne=function(e){function n(n,r){var t=e.call(this)||this;return t.token=n,t.environment=r,t.endpoint="//www.dobest.me:3030/perf.gif",t}return c(n,e),n.prototype.report=function(e){var n=this.parameterBuilder(e),r=this.URLBuilder(this.endpoint,n);return this.sendRequest(r)},n.prototype.parameterBuilder=function(e){for(var n={},r=Object.keys(e),t=0,i=r;t<i.length;t++){var o=i[t],a=e[o],s=ee[o];a&&s&&!isNaN(a)&&-1!==a&&(n[s]=a)}return n.token=this.token,n.os=this.environment.operatingSystem._type.toLowerCase(),n.br=this.environment.browser._type.toLowerCase(),n.bv=this.environment.browser.version.toLowerCase(),n.dc=this.environment.device.type,n.dv=this.environment.device.version,n},n}($),re=function(){function e(e){this.reporter=e,this.historyErrors=[]}return e.prototype.install=function(){var e=this,n=window.onerror;window.onerror=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];n&&n.apply(null,r);var i=r[0],o=r[1],a=r[2],s=r[3],u=r[4];e.packager({message:i,scriptURI:o,line:a,column:s,stack:u.stack})},window.addEventListener("error",function(e){e.preventDefault()})},e.prototype.packager=function(e){var n=window.WEB_TRACKER.catcher;if(n.enabled){for(var r=!n||n.random<0||n.random>1?1:n.random,t=n.repeat<0?5:n.repeat,i=n.exclude||[],o=0,a=i;o<a.length;o++){var s=a[o];if(s instanceof RegExp&&s.test(e.message))return}if(!(Math.random()>r)){this.historyErrors.reduce(function(n,r){return e.message===r.message&&e.line===r.line&&e.column===r.column&&e.stack===r.stack?++n:n},0)+1>t||(this.historyErrors.push(e),this.report(e))}}},e.prototype.report=function(e){this.reporter.report(e)},e}(),te=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.timerId=0,n.reportQueue=[],n}return c(n,e),n.prototype.bufferReport=function(e){var n=this,r=window.WEB_TRACKER.catcher,t=!r.merge||r.merge,i=r.delay<0?0:r.delay;if(t?this._merge(e):this.reportQueue.push(e),i<=0)return void this._report();this.timerId||(this.timerId=setTimeout(function(){n._report(),n.timerId=0},i))},n}($),ie=function(e){function n(n,r){var t=e.call(this)||this;return t.token=n,t.environment=r,t.endpoint="//www.dobest.me:3030/error.gif",t}return c(n,e),n.prototype.report=function(e){this.bufferReport(e)},n.prototype._report=function(){var e=this.parameterBuilder(this.reportQueue),n=this.URLBuilder(this.endpoint,e);return this.sendRequest(n)},n.prototype._merge=function(e){this.reportQueue.filter(function(n){return e.stack===n.stack}).length<=0&&this.reportQueue.push(e)},n.prototype.parameterBuilder=function(e){var n={};return n.err=JSON.stringify(e),n.token=this.token,n.os=this.environment.operatingSystem._type.toLowerCase(),n.br=this.environment.browser._type.toLowerCase(),n.bv=this.environment.browser.version.toLowerCase(),n.dc=this.environment.device.type,n.dv=this.environment.device.version,n},n}(te),oe=window;if(!oe.WEB_TRACKER)throw new Error("No configuration for Web Tracker is found");var ae,se=oe.WEB_TRACKER,ue=se.token,ce=(new G).detect();window.addEventListener("load",function(){se.metric.enabled&&setTimeout(function(){return p()}),se.catcher.enabled&&d()}),e.Browser=A,e.Engine=D,e.OperatingSystem=j,e.Device=q,e.Environment=G}(this.WebTracker=this.WebTracker||{});
//# sourceMappingURL=sdk.js.map
